!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xgplayer=t():e.xgplayer=t()}(window,function(){return function(i){var n={};function __webpack_require__(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}return __webpack_require__.m=i,__webpack_require__.c=n,__webpack_require__.d=function(e,t,i){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(__webpack_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)__webpack_require__.d(i,n,function(e){return t[e]}.bind(null,n));return i},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=74)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=_interopRequireDefault(i(8)),c=_interopRequireDefault(i(3)),o=_interopRequireDefault(i(28)),a=_interopRequireDefault(i(6)),s=_interopRequireDefault(i(4)),d=_interopRequireDefault(i(29)),u=i(5);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(){function Player(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Player);var n=_possibleConstructorReturn(this,(Player.__proto__||Object.getPrototypeOf(Player)).call(this,e));if(n.config=c.default.deepCopy({width:600,height:337.5,ignores:[],whitelist:[],lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),inactive:3e3,volume:.6,controls:!0,controlsList:["nodownload"]},e),n.version=u.version,n.userTimer=null,n.waitTimer=null,n.database=new o.default,n.history=[],n.isProgressMoving=!1,n.root=c.default.findDom(document,"#"+n.config.id),n.controls=c.default.createDom("xg-controls","",{unselectable:"on",onselectstart:"return false"},"xgplayer-controls"),!n.root){var t=n.config.el;if(!t||1!==t.nodeType)return n.emit("error",new s.default("use",n.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),_possibleConstructorReturn(n,!1);n.root=t}if(c.default.addClass(n.root,"xgplayer xgplayer-"+a.default.device+" xgplayer-nostart "+(n.config.controls?"":"no-controls")),n.root.appendChild(n.controls),n.config.fluid?(n.root.style["max-width"]="100%",n.root.style.width="100%",n.root.style.height="0",n.root.style["padding-top"]=100*n.config.height/n.config.width+"%",n.video.style.position="absolute",n.video.style.top="0",n.video.style.left="0"):("pc"===a.default.device||e.width||e.height)&&(n.root.style.width=n.config.width+"px",n.root.style.height=n.config.height+"px"),n.config.execBeforePluginsCall&&n.config.execBeforePluginsCall.forEach(function(e){e.call(n,n)}),n.config.controlStyle&&"String"===c.default.typeOf(n.config.controlStyle)){var i=n;window.fetch&&window.fetch(i.config.controlStyle,{method:"GET",headers:{Accept:"application/json"}}).then(function(e){e.ok&&e.json().then(function(e){for(var t in e)e.hasOwnProperty(t)&&(i.config[t]=e[t]);i.pluginsCall()})}).catch(function(e){console.log("Fetch错误:"+e)})}else n.pluginsCall();n.ev.forEach(function(e){var t=Object.keys(e)[0],i=n[e[t]];i&&n.on(t,i)}),["focus","blur"].forEach(function(e){n.on(e,n["on"+e.charAt(0).toUpperCase()+e.slice(1)])});var r=n;return n.mousemoveFunc=function(){r.emit("focus"),r.config.closeFocusVideoFocus||r.video.focus()},n.root.addEventListener("mousemove",n.mousemoveFunc),n.playFunc=function(){r.emit("focus"),r.config.closePlayVideoFocus||r.video.focus()},r.once("play",n.playFunc),setTimeout(function(){n.emit("ready")},0),n.config.videoInit&&c.default.hasClass(n.root,"xgplayer-nostart")&&n.start(),r.once("destroy",function onDestroy(){r.root.removeEventListener("mousemove",r.mousemoveFunc),r.off("destroy",onDestroy)}),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Player,r.default),n(Player,null,[{key:"isSupportMP4",value:function isSupportMP4(){return c.default.isSupportMP4()}}]),n(Player,[{key:"start",value:function start(e){var t=this,i=0<arguments.length&&void 0!==e?e:this.config.url,n=this.root,r=this;i&&""!==i||this.emit("urlNull"),this.logParams.playSrc=i,this.canPlayFunc=function(){var e=r.video.play();void 0!==e&&e&&e.then(function(){c.default.removeClass(r.root,"xgplayer-nostart"),r.emit("autoplay started")}).catch(function(){r.emit("autoplay was prevented"),Player.util.addClass(r.root,"xgplayer-is-autoplay")}),r.off("canplay",r.canPlayFunc)},"String"===c.default.typeOf(i)?this.video.src=i:i.forEach(function(e){t.video.appendChild(c.default.createDom("source","",{src:""+e.src,type:""+(e.type||"")}))}),this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.loadeddataFunc=function(){r.logParams.vt=(new Date).getTime(),r.logParams.pt>r.logParams.vt&&(r.logParams.pt=r.logParams.vt),r.logParams.vd=r.video.duration},this.once("loadeddata",this.loadeddataFunc),this.config.autoplay&&this.on("canplay",this.canPlayFunc),n.insertBefore(this.video,n.firstChild),setTimeout(function(){t.emit("complete")},1)}},{key:"reload",value:function reload(){this.video.load(),this.reloadFunc=function(){this.play().catch(function(e){})},this.once("loadeddata",this.reloadFunc)}},{key:"destroy",value:function destroy(e){var n=this,t=!(0<arguments.length&&void 0!==e)||e;for(var i in clearInterval(this.bulletResizeTimer),this._interval)clearInterval(this._interval[i]),this._interval[i]=null;function destroyFunc(){for(var e in this.emit("destroy"),this.video.removeAttribute("src"),this.video.load(),t&&(this.root.innerHTML="",this.root.className=""),this)delete this[e];this.off("pause",destroyFunc)}this.ev.forEach(function(e){var t=Object.keys(e)[0],i=n[e[t]];i&&n.off(t,i)}),this.loadeddataFunc&&this.off("loadeddata",this.loadeddataFunc),this.reloadFunc&&this.off("loadeddata",this.reloadFunc),this.replayFunc&&this.off("play",this.replayFunc),this.playFunc&&this.off("play",this.playFunc),["focus","blur"].forEach(function(e){n.off(e,n["on"+e.charAt(0).toUpperCase()+e.slice(1)])}),clearTimeout(this.userTimer),clearTimeout(this.waitTimer),clearTimeout(this.sliderTimer),this.paused?destroyFunc.call(this):(this.pause(),this.once("pause",destroyFunc)),function get(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,i)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(i):void 0}(Player.prototype.__proto__||Object.getPrototypeOf(Player.prototype),"destroy",this).call(this)}},{key:"replay",value:function replay(){var e=this,t=this._replay;c.default.removeClass(this.root,"xgplayer-ended"),this.logParams={bc:0,bu_acu_t:0,played:[],pt:(new Date).getTime(),vt:(new Date).getTime(),vd:0},this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.replayFunc=function(){e.logParams.vt=(new Date).getTime(),e.logParams.pt>e.logParams.vt&&(e.logParams.pt=e.logParams.vt),e.logParams.vd=e.video.duration},this.once("play",this.replayFunc),this.logParams.playSrc=this.video.currentSrc,t&&t instanceof Function?t():(this.currentTime=0,this.play().catch(function(e){}))}},{key:"pluginsCall",value:function pluginsCall(){var i=this,n=this;if(Player.plugins){var r=this.config.ignores;Object.keys(Player.plugins).forEach(function(t){var e=Player.plugins[t];r.some(function(e){return t===e})||(["pc","tablet","mobile"].some(function(e){return e===t})?t===a.default.device&&setTimeout(function(){e.call(n,n)},0):e.call(i,i))})}}},{key:"getPIP",value:function getPIP(e,t){var i=0<arguments.length&&void 0!==e?e:320,n=1<arguments.length&&void 0!==t?t:180,r=this.root.getBoundingClientRect(),o=r.top,a=r.left,s=c.default.createDom("xg-pip-lay","<div></div>",{},"xgplayer-pip-lay");this.root.appendChild(s);var u=c.default.createDom("xg-pip-drag",'<div class="drag-handle"><span>点击按住可拖动视频</span></div>',{tabindex:9},"xgplayer-pip-drag");this.root.appendChild(u);new d.default(".xgplayer",{handle:".drag-handle"});c.default.addClass(this.root,"xgplayer-pip-active"),this.root.style.width=i+"px",this.root.style.height=n+"px",this.root.style.right=0,this.root.style.bottom="200px",this.root.style.top="",this.root.style.left="",this.config.fluid&&(this.root.style["padding-top"]="");var l=this;["click","touchstart"].forEach(function(e){s.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation(),l.exitPIP(),l.root.style.top=o+"px",l.root.style.left=a+"px"})})}},{key:"exitPIP",value:function exitPIP(){c.default.removeClass(this.root,"xgplayer-pip-active"),this.root.style.right="",this.root.style.bottom="",this.root.style.top="",this.root.style.left="",this.config.fluid?(this.root.style.width="100%",this.root.style.height="0",this.root.style["padding-top"]=100*this.config.height/this.config.width+"%"):(this.config.width&&("number"!=typeof this.config.width?this.root.style.width=this.config.width:this.root.style.width=this.config.width+"px"),this.config.height&&("number"!=typeof this.config.height?this.root.style.height=this.config.height:this.root.style.height=this.config.height+"px"))}},{key:"clearWaitTimer",value:function clearWaitTimer(){this.waitTimer&&(window.clearTimeout(this.waitTimer),this.waitTimer=null)}},{key:"onFocus",value:function onFocus(){var e=this;c.default.removeClass(this.root,"xgplayer-inactive"),e.userTimer&&clearTimeout(e.userTimer),e.userTimer=setTimeout(function(){e.emit("blur")},e.config.inactive)}},{key:"onBlur",value:function onBlur(){this.paused||this.ended||c.default.addClass(this.root,"xgplayer-inactive")}},{key:"onPlay",value:function onPlay(){c.default.addClass(this.root,"xgplayer-playing"),c.default.removeClass(this.root,"xgplayer-pause")}},{key:"onPause",value:function onPause(){c.default.addClass(this.root,"xgplayer-pause"),this.userTimer&&clearTimeout(this.userTimer),this.emit("focus")}},{key:"onEnded",value:function onEnded(){c.default.addClass(this.root,"xgplayer-ended"),c.default.removeClass(this.root,"xgplayer-playing")}},{key:"onTimeupdate",value:function onTimeupdate(){(this.isLoading||this.waitTimer&&!this.isSeeking)&&this.checkBuffer()&&(this.clearWaitTimer(),c.default.removeClass(this.root,"xgplayer-isloading"),this.isLoading=!1),!this._hasStart&&this.paused?c.default.removeClass(this.root,"xgplayer-is-enter xgplayer-start-appear"):c.default.removeClass(this.root,"xgplayer-is-enter xgplayer-nostart xgplayer-start-appear")}},{key:"onSeeking",value:function onSeeking(){this.isSeeking=!0,this.onWaiting()}},{key:"onSeeked",value:function onSeeked(){this.isSeeking=!1,this.isLoading=!1,this.waitTimer&&this.clearWaitTimer(),c.default.removeClass(this.root,"xgplayer-isloading")}},{key:"onWaiting",value:function onWaiting(){if(this._hasStart||!this.paused){var e=this;e.waitTimer&&(this.clearWaitTimer(),this.isLoading=!1),e.waitTimer=setTimeout(function(){c.default.addClass(e.root,"xgplayer-isloading"),e.isLoading=!0,e.clearWaitTimer()},800)}}},{key:"onPlaying",value:function onPlaying(){this.isSeeking=!1,this.isLoading=!1,this.waitTimer&&this.clearWaitTimer(),c.default.removeClass(this.root,"xgplayer-isloading xgplayer-pause xgplayer-ended xgplayer-is-error xgplayer-replay"),c.default.addClass(this.root,"xgplayer-playing")}},{key:"checkBuffer",value:function checkBuffer(){var e=this.video.buffered,t=this.currentTime,i=e.length;return 0<i&&e.start([i-1])<=t&&e.end([i-1])>t?(console.log("checkBuffer true"),!0):(console.log("checkBuffer false"),!1)}}],[{key:"install",value:function install(e,t){Player.plugins||(Player.plugins={}),Player.plugins[e]=t}}]),Player}();l.util=c.default,l.sniffer=a.default,l.Errors=s.default,t.default=l,e.exports=t.default},function(e,t,i){"use strict";var n=i(21)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,i){"use strict";e.exports=function(e){return null!=e}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var util={createDom:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement(n);return o.className=t,o.innerHTML=e,Object.keys(r).forEach(function(e){var t=e,i=r[e];("video"!==n&&"audio"!==n||i)&&o.setAttribute(t,i)}),o},hasClass:function(e,t){return e.classList?Array.prototype.some.call(e.classList,function(e){return e===t}):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(t,e){t.classList?e.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.add(e)}):util.hasClass(t,e)||(t.className+=" "+e)},removeClass:function(i,e){i.classList?e.split(/\s+/g).forEach(function(e){i.classList.remove(e)}):util.hasClass(i,e)&&e.split(/\s+/g).forEach(function(e){var t=new RegExp("(\\s|^)"+e+"(\\s|$)");i.className=i.className.replace(t," ")})},toggleClass:function(t,e){e.split(/\s+/g).forEach(function(e){util.hasClass(t,e)?util.removeClass(t,e):util.addClass(t,e)})},findDom:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,i=arguments[1],n=void 0;try{n=t.querySelector(i)}catch(e){i.startsWith("#")&&(n=t.getElementById(i.slice(1)))}return n},padStart:function(e,t,i){for(var n=String(i),r=t>>0,o=Math.ceil(r/n.length),a=[],s=String(e);o--;)a.push(n);return a.join("").substring(0,r-s.length)+s},format:function(e){if(window.isNaN(e))return"";var t=util.padStart(Math.floor(e/3600),2,0),i=util.padStart(Math.floor((e-3600*t)/60),2,0),n=util.padStart(Math.floor(e-3600*t-60*i),2,0);return("00"===t?[i,n]:[t,i,n]).join(":")},event:function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},typeOf:function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},deepCopy:function(t,i){if("Object"===util.typeOf(i)&&"Object"===util.typeOf(t))return Object.keys(i).forEach(function(e){"Object"!==util.typeOf(i[e])||i[e]instanceof Node?"Array"===util.typeOf(i[e])?t[e]="Array"===util.typeOf(t[e])?t[e].concat(i[e]):i[e]:t[e]=i[e]:t[e]?util.deepCopy(t[e],i[e]):t[e]=i[e]}),t},getBgImage:function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var i=document.createElement("a");return i.href=t.replace(/url\("|"\)/g,""),i.href},copyDom:function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},setInterval:function(e,t,i,n){e._interval[t]||(e._interval[t]=setInterval(i.bind(e),n))},clearInterval:function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},createImgBtn:function(e,t,i,n){var r=util.createDom("xg-"+e,"",{},"xgplayer-"+e+"-img");if(r.style.backgroundImage='url("'+t+'")',i&&n){var o=void 0,a=void 0,s=void 0;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(e){return!(-1<i.indexOf(e)&&-1<n.indexOf(e))||(o=parseFloat(i.slice(0,i.indexOf(e)).trim()),a=parseFloat(n.slice(0,n.indexOf(e)).trim()),s=e,!1)}),r.style.width=""+o+s,r.style.height=""+a+s,r.style.backgroundSize=""+o+s+" "+a+s,r.style.margin="start"===e?"-"+a/2+s+" auto auto -"+o/2+s:"auto 5px auto 5px"}return r},Hex2RGBA:function(hex,alpha){var rgb=[];if(/^\#[0-9A-F]{3}$/i.test(hex)){var sixHex="#";hex.replace(/[0-9A-F]/gi,function(e){sixHex+=e+e}),hex=sixHex}return/^#[0-9A-F]{6}$/i.test(hex)?(hex.replace(/[0-9A-F]{2}/gi,function(kw){rgb.push(eval("0x"+kw))}),"rgba("+rgb.join(",")+", "+alpha+")"):"rgba(255, 255, 255, 0.1)"},isSupportMP4:function(){var e=[{key:"Trident",reg:/(rv:)([\d.]+)/},{key:"Trident",reg:/(msie)\s*([\d.]+)/},{key:"Chrome",reg:/(chrome)\/([\d.]+)/}],t=navigator.userAgent.toLowerCase(),i=null,n={};for(var r in e)if(i=e[r].reg.exec(t)){var o=e[r].key;n["is"+o]=o,n.name=o,n.appVersion=2<i.length?i[2]:"";break}if((!n.isChrome||"77.0.3835.0"!==n.appVersion&&"76.0.3790.0"!==n.appVersion)&&!n.isTrident)return!0;var a=document.createElement("video"),s={isSupport:!1,mime:""};return"function"==typeof a.canPlayType?["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","mp4v.20.240","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"].map(function(e){"probably"===a.canPlayType('video/mp4; codecs="'+e+'"')&&(s.isSupport=!0,s.mime+="||"+e)}):a=null,s.isSupport}};exports.default=util,module.exports=exports.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),c=i(5);var d={network:{code:1,msg:"视频下载错误",remark:"只要视频下载错误就使用此类型，无论是video本身的超时还是xhr的分段请求超时或者资源不存在"},mse:{code:2,msg:"流追加错误",remark:"追加流的时候如果类型不对、无法被正确解码则会触发此类错误"},parse:{code:3,msg:"解析错误",remark:"mp4、hls、flv我们都是使用js进行格式解析，如果解析失败则会触发此类错误"},format:{code:4,msg:"格式错误",remark:"如果浏览器不支持的格式导致播放错误"},decoder:{code:5,msg:"解码错误",remark:"浏览器解码异常会抛出此类型错误"},runtime:{code:6,msg:"语法错误",remark:"播放器语法错误"},timeout:{code:7,msg:"播放超时",remark:"播放过程中无法正常请求下一个分段导致播放中断"},other:{code:8,msg:"其他错误",remark:"不可知的错误或被忽略的错误类型"}},r=function(){function Errors(e,t,i,n,r,o,a,s){var u=8<arguments.length&&void 0!==arguments[8]?arguments[8]:{line:"",handle:"",msg:"",version:""};!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Errors);var l={};return 3<=arguments.length&&arguments.length<5?(l.playerVersion=c.version,l.errorType=e,l.code=t,l.errd=i||{},l.ex=(l.errd||{}).msg,l.domain=document.domain):(l.playerVersion=c.version,l.errorType=e,l.domain=document.domain,l.duration=i,l.currentTime=t,l.networkState=n,l.readyState=r,l.currentSrc=a,l.src=o,l.ended=s,l.errd=u||{},l.ex=(d[e]||{}).msg,l.code=l.errd.code),l}return n(Errors,null,[{key:"ErrorTypes",get:function get(){return d}}]),Errors}();t.default=r,e.exports=t.default},function(e){e.exports=JSON.parse('{"name":"xgplayer","version":"1.3.7","description":"video player","main":"./dist/index.js","scripts":{"build":"webpack --progress --display-chunks -p","prepare":"npm run build","test":"karma start --single-run","test:watch":"karma start","analyze":"webpack --analyze --progress --display-chunks -p","watch":"webpack --progress --display-chunks -p --watch --mode development"},"keywords":["video","player"],"babel":{"presets":["es2015"],"plugins":["add-module-exports","babel-plugin-bulk-import"]},"browserslist":["> 5%","IE 9","iOS 7","Firefox > 20"],"repository":{"type":"git","url":"git+https://github.com/bytedance/xgplayer.git"},"author":"yinguohui@bytedance.com","license":"MIT","dependencies":{"danmu.js":"^0.2.9","deepmerge":"^1.5.0","downloadjs":"1.4.7","draggabilly":"^2.2.0","event-emitter":"^0.3.5","pasition":"^1.0.1","request-frame":"^1.5.3","standard":"^14.3.1"},"devDependencies":{"autoprefixer":"^9.1.5","babel-core":"^6.26.3","babel-loader":"^7.1.4","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-bulk-import":"^1.0.2","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","chai":"^4.1.2","core-js":"^2.5.4","css-loader":"^0.28.11","json-loader":"^0.5.7","karma":"^3.0.0","karma-chrome-launcher":"^2.2.0","karma-mocha":"^1.3.0","karma-sourcemap-loader":"^0.3.7","karma-spec-reporter":"0.0.32","karma-webpack":"^4.0.0-rc.1","mocha":"^5.2.0","node-sass":"^4.8.3","postcss-cssnext":"^3.1.0","postcss-loader":"^2.1.5","sass-loader":"^6.0.7","style-loader":"^0.20.3","sugarss":"^1.0.1","uglifyjs-webpack-plugin":"^2.2.0","webpack":"^4.11.0","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.0.2","zlib":"^1.0.5"}}')},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={get device(){return n.os.isPc?"pc":"mobile"},get browser(){var t=navigator.userAgent.toLowerCase(),i={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(i).filter(function(e){return i[e].test(t)}))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),a=/(?:iPhone)/.test(e)&&!o;return{isTablet:o,isPhone:a,isAndroid:n,isPc:!(a||n||i||o),isSymbian:i,isWindowsPhone:t,isFireFox:r}}};t.default=n,e.exports=t.default},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),u=_interopRequireDefault(i(9)),l=_interopRequireDefault(i(3)),r=_interopRequireDefault(i(4));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o=navigator.userAgent,a=(-1<o.indexOf("Safari")&&o.indexOf("mac"),function(){function Proxy(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Proxy),this.logParams={bc:0,bu_acu_t:0,played:[]},this._hasStart=!1,this._seekingTimer=null,this.videoConfig={controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"webkit-playsinline":e.playsinline,"x5-playsinline":e.playsinline,"x5-video-player-type":e["x5-video-player-type"],"x5-video-player-fullscreen":e["x5-video-player-fullscreen"],"x5-video-orientation":e["x5-video-orientation"],airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:2,mediaType:e.mediaType||"video"},e.loop&&(this.videoConfig.loop="loop"),e.crossorigin&&(this.videoConfig.crossorigin="anonymous");var t="";if(e.textTrack&&Array.isArray(e.textTrack)&&(-1<navigator.userAgent.indexOf("Chrome")||-1<navigator.userAgent.indexOf("Firefox"))&&(e.textTrack.some(function(e){if(e.src&&e.label&&e.default)return t+='<track src="'+e.src+'" ',e.kind&&(t+='kind="'+e.kind+'" '),t+='label="'+e.label+'" ',e.srclang&&(t+='srclang="'+e.srclang+'" '),t+=(e.default?"default":"")+">",!0}),this.videoConfig.crossorigin="anonymous"),e.textTrackStyle){var i=document.createElement("style");this.textTrackStyle=i,document.head.appendChild(i);var n="";for(var r in e.textTrackStyle)n+=r+": "+e.textTrackStyle[r]+";";var o=e.id?"#"+e.id:e.el.id?"#"+e.el.id:"."+e.el.className;i.sheet.insertRule?i.sheet.insertRule(o+" video::cue { "+n+" }",0):i.sheet.addRule&&i.sheet.addRule(o+" video::cue",n)}this.video=l.default.createDom(this.videoConfig.mediaType,t,this.videoConfig,""),e.autoplay&&(this.video.autoplay=!0,e.autoplayMuted&&(this.video.muted=!0)),this.ev=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","canplaythrough"].map(function(e){return function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},e,"on"+e.charAt(0).toUpperCase()+e.slice(1))}),(0,u.default)(this),this._interval={};var a="0,0",s=this;this.ev.forEach(function(e){s.evItem=Object.keys(e)[0];var t=Object.keys(e)[0];s.video.addEventListener(Object.keys(e)[0],function(){s.logParams&&("play"===t?s.hasStart=!0:"waiting"===t?(s.logParams.bc++,s.inWaitingStart=(new Date).getTime()):"playing"===t?s.inWaitingStart&&(s.logParams.bu_acu_t+=(new Date).getTime()-s.inWaitingStart,s.inWaitingStart=void 0):"loadeddata"===t?s.logParams.played.push({begin:0,end:-1}):"seeking"===t?s.logParams.played.push({begin:s.video.currentTime,end:-1}):s&&s.logParams&&s.logParams.played&&"timeupdate"===t&&(s.logParams.played.length<1&&s.logParams.played.push({begin:s.video.currentTime,end:-1}),s.logParams.played[s.logParams.played.length-1].end=s.video.currentTime),"error"===t?s._onError():s.emit(t,s),s.hasOwnProperty("_interval")&&(["ended","error","timeupdate"].indexOf(t)<0?(clearInterval(s._interval.bufferedChange),l.default.setInterval(s,"bufferedChange",function(){for(var e=[],t=0,i=s.video.buffered.length;t<i;t++)e.push([s.video.buffered.start(t),s.video.buffered.end(t)]);e.toString()!==a&&(a=e.toString(),s.emit("bufferedChange",e))},200)):"timeupdate"!==t&&l.default.clearInterval(s,"bufferedChange")))},!1)})}return n(Proxy,[{key:"_onError",value:function _onError(){var e=this;e.video.error&&e.emit("error",new r.default("other",e.currentTime,e.duration,e.networkState,e.readyState,e.currentSrc,e.src,e.ended,{line:41,msg:e.error,handle:"Constructor",code:e.errorCode}))}},{key:"destroy",value:function destroy(){this.textTrackStyle&&this.textTrackStyle.parentNode.removeChild(this.textTrackStyle)}},{key:"play",value:function play(){return this.video.play()}},{key:"pause",value:function pause(){this.video.pause()}},{key:"canPlayType",value:function canPlayType(){this.video.canPlayType()}},{key:"getBufferedRange",value:function getBufferedRange(){var e=[0,0],t=this.video,i=t.buffered,n=t.currentTime;if(i)for(var r=0,o=i.length;r<o&&(e[0]=i.start(r),e[1]=i.end(r),!(e[0]<=n&&n<=e[1]));r++);return e[0]-n<=0&&n-e[1]<=0?e:[0,0]}},{key:"hasStart",get:function get(){return this._hasStart},set:function set(e){"boolean"!=typeof e||!0!==e||this._hasStart||(this._hasStart=!0,this.emit("hasstart"))}},{key:"autoplay",set:function set(e){this.video.autoplay=e},get:function get(){return this.video.autoplay}},{key:"buffered",get:function get(){return this.video.buffered}},{key:"crossOrigin",get:function get(){return this.video.crossOrigin},set:function set(e){this.video.crossOrigin=e}},{key:"currentSrc",get:function get(){return this.video.currentSrc},set:function set(e){this.video.currentSrc=e}},{key:"currentTime",get:function get(){return this.video.currentTime},set:function set(e){"function"==typeof isFinite&&!isFinite(e)||(this.video.currentTime=e,this.emit("currentTimeChange"))}},{key:"defaultMuted",get:function get(){return this.video.defaultMuted},set:function set(e){this.video.defaultMuted=e}},{key:"duration",get:function get(){return this.video.duration}},{key:"ended",get:function get(){return this.video.ended}},{key:"error",get:function get(){var e=this.video.error;if(!e)return null;var t=[{en:"MEDIA_ERR_ABORTED",cn:"取回过程被用户中止"},{en:"MEDIA_ERR_NETWORK",cn:"当下载时发生错误"},{en:"MEDIA_ERR_DECODE",cn:"当解码时发生错误"},{en:"MEDIA_ERR_SRC_NOT_SUPPORTED",cn:"不支持音频/视频"}];return this.lang?this.lang[t[e.code-1].en]:t[e.code-1].en}},{key:"errorCode",get:function get(){return this.video.error.code}},{key:"loop",get:function get(){return this.video.loop},set:function set(e){this.video.loop=e}},{key:"muted",get:function get(){return this.video.muted},set:function set(e){this.video.muted=e}},{key:"networkState",get:function get(){var e=[{en:"NETWORK_EMPTY",cn:"音频/视频尚未初始化"},{en:"NETWORK_IDLE",cn:"音频/视频是活动的且已选取资源，但并未使用网络"},{en:"NETWORK_LOADING",cn:"浏览器正在下载数据"},{en:"NETWORK_NO_SOURCE",cn:"未找到音频/视频来源"}];return this.lang?this.lang[e[this.video.networkState].en]:e[this.video.networkState].en}},{key:"paused",get:function get(){return this.video.paused}},{key:"playbackRate",get:function get(){return this.video.playbackRate},set:function set(e){this.video.playbackRate=e}},{key:"played",get:function get(){return this.video.played}},{key:"preload",get:function get(){return this.video.preload},set:function set(e){this.video.preload=e}},{key:"readyState",get:function get(){var e=[{en:"HAVE_NOTHING",cn:"没有关于音频/视频是否就绪的信息"},{en:"HAVE_METADATA",cn:"关于音频/视频就绪的元数据"},{en:"HAVE_CURRENT_DATA",cn:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒"},{en:"HAVE_FUTURE_DATA",cn:"当前及至少下一帧的数据是可用的"},{en:"HAVE_ENOUGH_DATA",cn:"可用数据足以开始播放"}];return this.lang?this.lang[e[this.video.readyState].en]:e[this.video.readyState]}},{key:"seekable",get:function get(){return this.video.seekable}},{key:"seeking",get:function get(){return this.video.seeking}},{key:"src",get:function get(){return this.video.src},set:function set(e){var t=this;l.default.hasClass(this.root,"xgplayer-ended")||this.emit("urlchange",JSON.parse(JSON.stringify(t.logParams))),this.logParams={bc:0,bu_acu_t:0,played:[],pt:(new Date).getTime(),vt:(new Date).getTime(),vd:0},this.video.pause(),this.video.src=e,this.emit("srcChange"),this.logParams.playSrc=e,this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.once("loadeddata",function ldFunc(){t.logParams.vt=(new Date).getTime(),t.logParams.pt>t.logParams.vt&&(t.logParams.pt=t.logParams.vt),t.logParams.vd=t.video.duration,t.off("loadeddata",ldFunc)})}},{key:"volume",get:function get(){return this.video.volume},set:function set(e){this.video.volume=e}},{key:"fullscreen",get:function get(){return l.default.hasClass(this.root,"xgplayer-is-fullscreen")||l.default.hasClass(this.root,"xgplayer-fullscreen-active")}},{key:"bullet",get:function get(){return!!l.default.findDom(this.root,"xg-bullet")&&l.default.hasClass(l.default.findDom(this.root,"xg-bullet"),"xgplayer-has-bullet")}},{key:"textTrack",get:function get(){return l.default.hasClass(this.root,"xgplayer-is-textTrack")}},{key:"pip",get:function get(){return l.default.hasClass(this.root,"xgplayer-pip-active")}}]),Proxy}());t.default=a,e.exports=t.default},function(e,t,i){"use strict";var r,n,o,a,s,u,l,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=i(10),f=i(27),p=Function.prototype.apply,h=Function.prototype.call,g=Object.create,v=Object.defineProperty,y=Object.defineProperties,m=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};n=function once(e,t){var i,n;return f(t),r.call(n=this,e,i=function once(){o.call(n,e,i),p.call(t,this,arguments)}),i.__eeOnceListener__=t,this},s={on:r=function on(e,t){var i;return f(t),m.call(this,"__ee__")?i=this.__ee__:(i=b.value=g(null),v(this,"__ee__",b),b.value=null),i[e]?"object"===c(i[e])?i[e].push(t):i[e]=[i[e],t]:i[e]=t,this},once:n,off:o=function off(e,t){var i,n,r,o;if(f(t),!m.call(this,"__ee__"))return this;if(!(i=this.__ee__)[e])return this;if("object"===(void 0===(n=i[e])?"undefined":c(n)))for(o=0;r=n[o];++o)r!==t&&r.__eeOnceListener__!==t||(2===n.length?i[e]=n[o?0:1]:n.splice(o,1));else n!==t&&n.__eeOnceListener__!==t||delete i[e];return this},emit:a=function emit(e,t,i){var n,r,o,a,s;if(m.call(this,"__ee__")&&(a=this.__ee__[e]))if("object"===(void 0===a?"undefined":c(a))){for(r=arguments.length,s=new Array(r-1),n=1;n<r;++n)s[n-1]=arguments[n];for(a=a.slice(),n=0;o=a[n];++n)p.call(o,this,s)}else switch(arguments.length){case 1:h.call(a,this);break;case 2:h.call(a,this,t);break;case 3:h.call(a,this,t,i);break;default:for(r=arguments.length,s=new Array(r-1),n=1;n<r;++n)s[n-1]=arguments[n];p.call(a,this,s)}}},u={on:d(r),once:d(n),off:d(o),emit:d(a)},l=y({},u),e.exports=t=function exports(e){return null==e?g(l):y(Object(e),u)},t.methods=s},function(e,t,i){"use strict";var s=i(2),u=i(11),l=i(15),c=i(23),d=i(24);(e.exports=function(e,t){var i,n,r,o,a;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],s(e)?(i=d.call(e,"c"),n=d.call(e,"e"),r=d.call(e,"w")):(i=r=!0,n=!1),a={value:t,configurable:i,enumerable:n,writable:r},o?l(c(o),a):a}).gs=function(e,t,i){var n,r,o,a;return"string"!=typeof e?(o=i,i=t,t=e,e=null):o=arguments[3],s(t)?u(t)?s(i)?u(i)||(o=i,i=void 0):i=void 0:(o=t,t=i=void 0):t=void 0,r=s(e)?(n=d.call(e,"c"),d.call(e,"e")):!(n=!0),a={get:t,set:i,configurable:n,enumerable:r},o?l(c(o),a):a}},function(e,t,i){"use strict";var n=i(12),r=/^\s*class[\s{/}]/,o=Function.prototype.toString;e.exports=function(e){return!!n(e)&&!r.test(o.call(e))}},function(e,t,i){"use strict";var n=i(13);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},function(e,t,i){"use strict";var n=i(14);e.exports=function(e){if(!n(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch(e){return!1}}},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=i(2),o={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!r(e)&&hasOwnProperty.call(o,void 0===e?"undefined":n(e))}},function(e,t,i){"use strict";e.exports=i(16)()?Object.assign:i(17)},function(e,t,i){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,i){"use strict";var a=i(18),s=i(22),u=Math.max;e.exports=function(t,i){var n,e,r,o=u(arguments.length,2);for(t=Object(s(t)),r=function assign(e){try{t[e]=i[e]}catch(e){n=n||e}},e=1;e<o;++e)a(i=arguments[e]).forEach(r);if(void 0!==n)throw n;return t}},function(e,t,i){"use strict";e.exports=i(19)()?Object.keys:i(20)},function(e,t,i){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,i){"use strict";var n=i(1),r=Object.keys;e.exports=function(e){return r(n(e)?Object(e):e)}},function(e,t,i){"use strict";e.exports=function(){}},function(e,t,i){"use strict";var n=i(1);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,i){"use strict";var n=i(1),r=Array.prototype.forEach,o=Object.create;e.exports=function(e){var t=o(null);return r.call(arguments,function(e){n(e)&&function process(e,t){var i;for(i in e)t[i]=e[i]}(Object(e),t)}),t}},function(e,t,i){"use strict";e.exports=i(25)()?String.prototype.contains:i(26)},function(e,t,i){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},function(e,t,i){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return-1<n.call(this,e,arguments[1])}},function(e,t,i){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var r=function(){function INDEXDB(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,INDEXDB),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=e}return n(INDEXDB,[{key:"openDB",value:function openDB(t){var i=this,n=this,e=this.myDB.version||1,r=n.indexedDB.open(n.myDB.name,e);r.onerror=function(e){},r.onsuccess=function(e){i.myDB.db=e.target.result,t.call(n)},r.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction;t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function deletedb(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function closeDB(){this.myDB.db.close()}},{key:"addData",value:function addData(e,t){for(var i=this.myDB.db.transaction(e,"readwrite").objectStore(e),n=void 0,r=0;r<t.length;r++)(n=i.add(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function putData(e,t){for(var i=this.myDB.db.transaction(e,"readwrite").objectStore(e),n=void 0,r=0;r<t.length;r++)(n=i.put(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function getDataByKey(e,t,i){var n=this,r=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);r.onerror=function(){i.call(n,null)},r.onsuccess=function(e){var t=e.target.result;i.call(n,t)}}},{key:"deleteData",value:function deleteData(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function clearData(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),INDEXDB}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";var r,o;
/*!
 * Draggabilly v2.2.0
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */
!function(i){r=[n(30),n(31)],void 0===(o=function(e,t){return function factory(o,u,e){"use strict";function extend(e,t){for(var i in t){e[i]=t[i]}return e}function noop(){}var i=o.jQuery;function Draggabilly(e,t){this.element=typeof e=="string"?document.querySelector(e):e;if(i){this.$element=i(this.element)}this.options=extend({},this.constructor.defaults);this.option(t);this._create()}var t=Draggabilly.prototype=Object.create(e.prototype);Draggabilly.defaults={},t.option=function(e){extend(this.options,e)};var n={relative:true,absolute:true,fixed:true};function applyGrid(e,t,i){i=i||"round";return t?Math[i](e/t)*t:e}if(t._create=function(){this.position={};this._getPosition();this.startPoint={x:0,y:0};this.dragPoint={x:0,y:0};this.startPosition=extend({},this.position);var e=getComputedStyle(this.element);if(!n[e.position]){this.element.style.position="relative"}this.on("pointerDown",this.onPointerDown);this.on("pointerMove",this.onPointerMove);this.on("pointerUp",this.onPointerUp);this.enable();this.setHandles()},t.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element];this.bindHandles()},t.dispatchEvent=function(e,t,i){var n=[t].concat(i);this.emitEvent(e,n);this.dispatchJQueryEvent(e,t,i)},t.dispatchJQueryEvent=function(e,t,i){var n=o.jQuery;if(!n||!this.$element){return}var r=n.Event(t);r.type=e;this.$element.trigger(r,i)},t._getPosition=function(){var e=getComputedStyle(this.element);var t=this._getPositionCoord(e.left,"width");var i=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t;this.position.y=isNaN(i)?0:i;this._addTransformPosition(e)},t._getPositionCoord=function(e,t){if(e.indexOf("%")!=-1){var i=u(this.element.parentNode);return!i?0:parseFloat(e)/100*i[t]}return parseInt(e,10)},t._addTransformPosition=function(e){var t=e.transform;if(t.indexOf("matrix")!==0){return}var i=t.split(",");var n=t.indexOf("matrix3d")===0?12:4;var r=parseInt(i[n],10);var o=parseInt(i[n+1],10);this.position.x+=r;this.position.y+=o},t.onPointerDown=function(e,t){this.element.classList.add("is-pointer-down");this.dispatchJQueryEvent("pointerDown",e,[t])},t.dragStart=function(e,t){if(!this.isEnabled){return}this._getPosition();this.measureContainment();this.startPosition.x=this.position.x;this.startPosition.y=this.position.y;this.setLeftTop();this.dragPoint.x=0;this.dragPoint.y=0;this.element.classList.add("is-dragging");this.dispatchEvent("dragStart",e,[t]);this.animate()},t.measureContainment=function(){var e=this.getContainer();if(!e){return}var t=u(this.element);var i=u(e);var n=this.element.getBoundingClientRect();var r=e.getBoundingClientRect();var o=i.borderLeftWidth+i.borderRightWidth;var a=i.borderTopWidth+i.borderBottomWidth;var s=this.relativeStartPosition={x:n.left-(r.left+i.borderLeftWidth),y:n.top-(r.top+i.borderTopWidth)};this.containSize={width:i.width-o-s.x-t.width,height:i.height-a-s.y-t.height}},t.getContainer=function(){var e=this.options.containment;if(!e){return}var t=e instanceof HTMLElement;if(t){return e}if(typeof e=="string"){return document.querySelector(e)}return this.element.parentNode},t.onPointerMove=function(e,t,i){this.dispatchJQueryEvent("pointerMove",e,[t,i])},t.dragMove=function(e,t,i){if(!this.isEnabled){return}var n=i.x;var r=i.y;var o=this.options.grid;var a=o&&o[0];var s=o&&o[1];n=applyGrid(n,a);r=applyGrid(r,s);n=this.containDrag("x",n,a);r=this.containDrag("y",r,s);n=this.options.axis=="y"?0:n;r=this.options.axis=="x"?0:r;this.position.x=this.startPosition.x+n;this.position.y=this.startPosition.y+r;this.dragPoint.x=n;this.dragPoint.y=r;this.dispatchEvent("dragMove",e,[t,i])},t.containDrag=function(e,t,i){if(!this.options.containment){return t}var n=e=="x"?"width":"height";var r=this.relativeStartPosition[e];var o=applyGrid(-r,i,"ceil");var a=this.containSize[n];a=applyGrid(a,i,"floor");return Math.max(o,Math.min(a,t))},t.onPointerUp=function(e,t){this.element.classList.remove("is-pointer-down");this.dispatchJQueryEvent("pointerUp",e,[t])},t.dragEnd=function(e,t){if(!this.isEnabled){return}this.element.style.transform="";this.setLeftTop();this.element.classList.remove("is-dragging");this.dispatchEvent("dragEnd",e,[t])},t.animate=function(){if(!this.isDragging){return}this.positionDrag();var e=this;requestAnimationFrame(function animateFrame(){e.animate()})},t.setLeftTop=function(){this.element.style.left=this.position.x+"px";this.element.style.top=this.position.y+"px"},t.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},t.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},t.setPosition=function(e,t){this.position.x=e;this.position.y=t;this.setLeftTop()},t.enable=function(){this.isEnabled=true},t.disable=function(){this.isEnabled=false;if(this.isDragging){this.dragEnd()}},t.destroy=function(){this.disable();this.element.style.transform="";this.element.style.left="";this.element.style.top="";this.element.style.position="";this.unbindHandles();if(this.$element){this.$element.removeData("draggabilly")}},t._init=noop,i&&i.bridget){i.bridget("draggabilly",Draggabilly)}return Draggabilly}(i,e,t)}.apply(t,r))||(e.exports=o)}(window)},function(e,t,i){"use strict";var n,r,_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,void 0===(r="function"==typeof(n=function factory(){"use strict";function getStyleSize(e){var t=parseFloat(e);var i=e.indexOf("%")==-1&&!isNaN(t);return i&&t}function noop(){}var i=typeof console=="undefined"?noop:function(e){console.error(e)},y=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],m=y.length;function getZeroSize(){var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var t=0;t<m;t++){var i=y[t];e[i]=0}return e}function getStyle(e){var t=getComputedStyle(e);if(!t){i("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? "+"See https://bit.ly/getsizebug1")}return t}var n=false,b;function setup(){if(n){return}n=true;var e=document.createElement("div");e.style.width="200px";e.style.padding="1px 2px 3px 4px";e.style.borderStyle="solid";e.style.borderWidth="1px 2px 3px 4px";e.style.boxSizing="border-box";var t=document.body||document.documentElement;t.appendChild(e);var i=getStyle(e);b=Math.round(getStyleSize(i.width))==200;getSize.isBoxSizeOuter=b;t.removeChild(e)}function getSize(e){setup();if(typeof e=="string"){e=document.querySelector(e)}if(!e||(typeof e==="undefined"?"undefined":_(e))!="object"||!e.nodeType){return}var t=getStyle(e);if(t.display=="none"){return getZeroSize()}var i={};i.width=e.offsetWidth;i.height=e.offsetHeight;var n=i.isBorderBox=t.boxSizing=="border-box";for(var r=0;r<m;r++){var o=y[r];var a=t[o];var s=parseFloat(a);i[o]=!isNaN(s)?s:0}var u=i.paddingLeft+i.paddingRight;var l=i.paddingTop+i.paddingBottom;var c=i.marginLeft+i.marginRight;var d=i.marginTop+i.marginBottom;var f=i.borderLeftWidth+i.borderRightWidth;var p=i.borderTopWidth+i.borderBottomWidth;var h=n&&b;var g=getStyleSize(t.width);if(g!==false){i.width=g+(h?0:u+f)}var v=getStyleSize(t.height);if(v!==false){i.height=v+(h?0:l+p)}i.innerWidth=i.width-(u+f);i.innerHeight=i.height-(l+p);i.outerWidth=i.width+c;i.outerHeight=i.height+d;return i}return getSize})?n.call(t,i,t,e):n)||(e.exports=r)},function(e,i,n){"use strict";var r,o;
/*!
 * Unidragger v2.3.0
 * Draggable base class
 * MIT license
 */
!function(t){r=[n(32)],void 0===(o=function(e){return function factory(o,e){"use strict";function Unidragger(){}var t=Unidragger.prototype=Object.create(e.prototype);t.bindHandles=function(){this._bindHandles(true)},t.unbindHandles=function(){this._bindHandles(false)},t._bindHandles=function(e){e=e===undefined?true:e;var t=e?"addEventListener":"removeEventListener";var i=e?this._touchActionValue:"";for(var n=0;n<this.handles.length;n++){var r=this.handles[n];this._bindStartEvent(r,e);r[t]("click",this);if(o.PointerEvent){r.style.touchAction=i}}},t._touchActionValue="none",t.pointerDown=function(e,t){var i=this.okayPointerDown(e);if(!i){return}this.pointerDownPointer=t;e.preventDefault();this.pointerDownBlur();this._bindPostStartEvents(e);this.emitEvent("pointerDown",[e,t])};var r={TEXTAREA:true,INPUT:true,SELECT:true,OPTION:true},a={radio:true,checkbox:true,button:true,submit:true,image:true,file:true};return t.okayPointerDown=function(e){var t=r[e.target.nodeName],i=a[e.target.type],n=!t||i;return n||this._pointerReset(),n},t.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},t.pointerMove=function(e,t){var i=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,i]),this._dragMove(e,t,i)},t._dragPointerMove=function(e,t){var i={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(e,t),i},t.hasDragStarted=function(e){return 3<Math.abs(e.x)||3<Math.abs(e.y)},t.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},t._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},t._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},t.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},t._dragMove=function(e,t,i){this.isDragging&&this.dragMove(e,t,i)},t.dragMove=function(e,t,i){e.preventDefault(),this.emitEvent("dragMove",[e,t,i])},t._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},t.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},t.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},t._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},t.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},Unidragger.getPointerPoint=e.getPointerPoint,Unidragger}(t,e)}.apply(i,r))||(e.exports=o)}(window)},function(e,i,n){"use strict";var r,o;
/*!
 * Unipointer v2.3.0
 * base class for doing one thing with pointer event
 * MIT license
 */
!function(t){r=[n(33)],void 0===(o=function(e){return function factory(r,e){"use strict";function noop(){}function Unipointer(){}var t=Unipointer.prototype=Object.create(e.prototype);t.bindStartEvent=function(e){this._bindStartEvent(e,true)},t.unbindStartEvent=function(e){this._bindStartEvent(e,false)},t._bindStartEvent=function(e,t){t=t===undefined?true:t;var i=t?"addEventListener":"removeEventListener";var n="mousedown";if(r.PointerEvent){n="pointerdown"}else if("ontouchstart"in r){n="touchstart"}e[i](n,this)},t.handleEvent=function(e){var t="on"+e.type;if(this[t]){this[t](e)}},t.getTouch=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.identifier==this.pointerIdentifier){return i}}},t.onmousedown=function(e){var t=e.button;if(t&&t!==0&&t!==1){return}this._pointerDown(e,e)},t.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},t.onpointerdown=function(e){this._pointerDown(e,e)},t._pointerDown=function(e,t){if(e.button||this.isPointerDown){return}this.isPointerDown=true;this.pointerIdentifier=t.pointerId!==undefined?t.pointerId:t.identifier;this.pointerDown(e,t)},t.pointerDown=function(e,t){this._bindPostStartEvents(e);this.emitEvent("pointerDown",[e,t])};var i={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return t._bindPostStartEvents=function(e){if(e){var t=i[e.type];t.forEach(function(e){r.addEventListener(e,this)},this),this._boundPointerEvents=t}},t._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){r.removeEventListener(e,this)},this),delete this._boundPointerEvents)},t.onmousemove=function(e){this._pointerMove(e,e)},t.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},t.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},t._pointerMove=function(e,t){this.pointerMove(e,t)},t.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},t.onmouseup=function(e){this._pointerUp(e,e)},t.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},t.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},t._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},t.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},t._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},t._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},t.pointerDone=function noop(){},t.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},t.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},t._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},t.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},Unipointer.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},Unipointer}(t,e)}.apply(i,r))||(e.exports=o)}(window)},function(e,t,i){"use strict";var n,r;void 0===(r="function"==typeof(n=function(){"use strict";function EvEmitter(){}var e=EvEmitter.prototype;return e.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},e.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||{})[t]=!0,this}},e.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],r=0;r<i.length;r++){var o=i[r];n&&n[o]&&(this.off(e,o),delete n[o]),o.apply(this,t)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},EvEmitter})?n.call(t,i,t,e):n)||(e.exports=r)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){e.exports=i(0)}])});
//# sourceMappingURL=player.js.map